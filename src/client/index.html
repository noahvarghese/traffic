<!DOCTYPE html>
<html>
    <head>
        <title>Traffic</title>
        <meta charset="utf-8" />
    </head>
    <body>
        <div id="root"></div>
        <script type="text/javascript">

            const YFromLatitude = latitude => latitude + 90;
            const XFromLongitude = longitude => longitude + 180;

            const renderGraph = (Nodes, Edges) => {
                // latitudes go 90 degress (north) and -90 degress (south)
                const latitudes = 180;
                // longitudes go 180 degress (east) and -180 degress (west)
                const longitudes = 360;

                const root = document.getElementById("root");
                const canvas = document.createElement("canvas");
                const ctx = canvas.getContext("2d");
                
                ctx.canvas.width  = window.innerWidth;
                ctx.canvas.height = window.innerHeight;

                for ( let node of Nodes ) {
                    ctx.fillRect(XFromLongitude(node.location.longitude), YFromLatitude(node.location.latitude));
                }

                root.appendChild(canvas);
            };

            window.addEventListener("load", () => {
                fetch("http://localhost:3000/renderGraph", { method: "POST" })
                    .then(res => res.data)
                    .then(data => {
                        const Intersections = data.Nodes;
                        const Roads = data.Edges;
                        renderGraph(Intersections, Roads);
                    })
                    .catch(err => console.error(err));
            });
        </script>
    </body>
</html>
